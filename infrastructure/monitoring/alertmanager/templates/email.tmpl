{{ define "email.default.subject" }}[{{ .Status | toUpper }}{{ if eq .Status "firing" }}:{{ .Alerts.Firing | len }}{{ end }}] {{ .GroupLabels.SortedPairs.Values | join " " }} {{ if gt (len .CommonLabels) (len .GroupLabels) }}({{ with .CommonLabels.Remove .GroupLabels.Names }}{{ .Values | join " " }}{{ end }}){{ end }}{{ end }}

{{ define "email.default.body" }}
{{ if gt (len .Alerts.Firing) 0 }}
*** FIRING ALERTS ***
{{ range .Alerts.Firing }}
Alert: {{ .Annotations.summary }}
Description: {{ .Annotations.description }}
Severity: {{ .Labels.severity }}
Service: {{ .Labels.service }}
Instance: {{ .Labels.instance }}
Started: {{ .StartsAt.Format "2006-01-02 15:04:05" }}

Labels:
{{ range .Labels.SortedPairs }}  {{ .Name }}: {{ .Value }}
{{ end }}

Annotations:
{{ range .Annotations.SortedPairs }}  {{ .Name }}: {{ .Value }}
{{ end }}
---
{{ end }}
{{ end }}

{{ if gt (len .Alerts.Resolved) 0 }}
*** RESOLVED ALERTS ***
{{ range .Alerts.Resolved }}
Alert: {{ .Annotations.summary }}
Description: {{ .Annotations.description }}
Severity: {{ .Labels.severity }}
Service: {{ .Labels.service }}
Instance: {{ .Labels.instance }}
Started: {{ .StartsAt.Format "2006-01-02 15:04:05" }}
Resolved: {{ .EndsAt.Format "2006-01-02 15:04:05" }}
---
{{ end }}
{{ end }}
{{ end }}
